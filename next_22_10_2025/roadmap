Step 2

1. I added all the components.
  1.1 Js file  - Validations in js file - working
  1.2 HTML -- The html code - loading - the page is displayed
  1.3 CSS -- Working
  1.4 Auto Calculation  -- Working
  1.5 Parameters from xls file -- It doesn't work cl cuatm. I need to change - the field - (options in the xls file)
 

 Step 3  

 1.1 Am modificat parametru pentru cl cuatm.  
 1.2 I am loading again from the xls file. 

 Step. 4 

 1.1 Modify the tables - html code - exclude column 10. In both tables and give me the code in the file


 Step. 5

 Analizeaza fisierul. Si dupa exemplu validarilor 
 creaza o validare noua 
 03-013.1  Cap II (T-F), Col.6*100/ Col.1 apartine intervalului [8%-10%] - ca functie 

 dupa exemplu 
 03-013 Cap II (F), Col.6*100/ Col.1 apartine intervalului [8%-10%]
 si exemplu 03-127 Cap.2 col. 1(T-F)*1000/Cap.1 Col.2(T-F)/12=>5500<20000


 Verifica 03-015 - si modifica sa fie asa 03-015 Cap II (F), Col.7*100/ (Col.1-Col.6) apartine intervalului [1%-13%] si 
 adauga o validare noua 03-015.1 Cap II (T-F), Col.7*100/ (Col.1-Col.6) apartine intervalului [1%-13%] - ambele warnings

 Verifica -	03-015.1 - Formule pentru calculul -	03-015.1 = (Col.7 (T) – col.7 (F))*100/((Col.1 (T) – Col.6 (T)) – ((Col.1 (F) – Col.6 (F)) este aceasta ?


 

Acum daca sunt 2 filiale si daca completezi nu mai 2 filiala nu se calculeaza nimic. Dar validarea statica  03-084 - functioneaza corect 
 Este validare  03-084 care vifica suma dintre tabelul principal si filiale - si care functioneaza corect - si cu 2 si cu 3 filiale 


CAPIa_R_F_C2_FILIAL-1-1 - Se calculeaza si se afiseaza corect 



CAPIa_R_F_C2_FILIAL-2-1 in tabelul primar nimic 

CAPIa_R_T_C2_FILIAL-1-1 

De ja mai bine

Dar mai sunt randurile dinamice 

CAPIa_R_T_C2_FILIAL-1-1 - Se calculeza  

CAPIa_R_F_C2_FILIAL-1-1 -- Se calculeza 

CAPIa_R_T_C2_FILIAL-1-1  - se calculeaza 

CAPIa_R_F_C2_FILIAL-1-1  -  se calculeaza 

CAPIa_R01_T_C2_FILIAL-2  -  Calculeza 
CAPIa_R01_F_C2_FILIAL-2  -  Calculeza 

CAPIa_R_T_C2_FILIAL-2-1  - Nu se calculeaza 

CAPIa_R_F_C2_FILIAL-2-1  - Nu se calculeaza 
 


 In - CAPIa_CUATM_R_INDEX_FILIAL-2 

 CAPIa_R_T_C2_FILIAL-2-1  - Nu se calculeaza 

 CAPIa_R_F_C2_FILIAL-2-1 - Nu se calculeaza  



Acum se calculeaza corect - 
Dar - cand sa creat filiala - deodata in tabelul primar trebuie sa se coloreze si sa fie readonly toate randurile si coloanele necesare. Dar acum se coloreaza cate unul si cand se elimina filiala sa se elimine si valorile - si daca sa eliminat ultima filiala sa se ajunga la stare initiala  


Se calculeaza corect - 

Dar inca odata iti explica cand se creaza filiala 


    Cod eroare: 03-084, Cap. I., Rândul "Total salariați", Col.1 - Valoarea din I. (tab. de bază), Rândul 0, Col.1, trebuie să fie egală cu suma valorilor similare pentru fiecare activitate (pe tabelele adaugătoare), (0.00).
    Cod eroare: 03-084, Cap. I., Rândul "Total salariați", Col.1 - Valoarea din I. (tab. de bază), Rândul 1, Col.1, trebuie să fie egală cu suma valorilor similare pentru fiecare activitate (pe tabelele adaugătoare), (0.00).


Analizeaza  codul js - fisierul cu care lucrezi in Dripal - Raportul M3 
Modifica validarea 03-084 -- validate_rule_03084(param, index)
Cod eroare: 03-084, Cap. I., Rândul "Total salariați", Col.1 - Valoarea din I. (tab. de bază) (de adaugat afisarea valorii), Rândul 0, Col.1, trebuie să fie egală cu suma valorilor similare pentru fiecare activitate (pe tabelele adaugătoare), (33.00).


Da-mi nu mai codul modificat - adica validate_rule_03084 () - daca se modifca nu mai aceasta functie. 

Modifica codul - trebuie sa facem cum in cazul sincronizarea CAEM dintre Cap. I și Cap. II 
- Dar noi trebuie sa facem 









Daca selectezi   in CAP I 
<span class="select2-selection__rendered" id="select2-CAPIa_R_T_C1-1-container" title="0113, Cultivarea legumelor si a pepenilor, a radacinoaselor si tuberculilor">0113, Cultivarea legumelor si a pepenilor, a radacinoaselor si tuberculilor</span>

se selecteaza si in CAP II 

<span class="select2-selection__rendered" id="select2-CAPII_R_T_C1-1-container" title="0113, Cultivarea legumelor si a pepenilor, a radacinoaselor si tuberculilor">0113, Cultivarea legumelor si a pepenilor, a radacinoaselor si tuberculilor</span>

in timp real.

Care cod din fisier face aceasta ? 


Mai analizeaza inca odata 
Trebuie de sincronizat in timp real    

function get_caem() {
        return Drupal.settings.mywebform.values.CAEM;
    }

    values.CAEM - Principal 

    <span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-labelledby="select2-CAPIa_R01_T_C1-container"><span class="select2-selection__rendered" id="select2-CAPIa_R01_T_C1-container" title=""></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span>


    <span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-labelledby="select2-CAPII_R01_T_C1-container"><span class="select2-selection__rendered" id="select2-CAPII_R01_T_C1-container" title=""></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span>


    Adica daca se selecteaza un COD in Drupal.settings.mywebform.values.CAEM

    sa se selecteze automat si in 
    CAPIa_R01_T_C1-container si CAPII_R01_T_C1 - cum facem ?
    Ce trebuie de adaugat in cod ? si cum ? 

    Nu merge - Verifica din nou - 
Dintre 
    CAEM	Activitatea principală	dec/DataSet/Header/CAEM			custom	select			0	0	0	0	0	0	1	13	0	@cuiio_caem_code	<?php return declarations_get_caem_list('vocabulary_18'); ?>		text	0	0	300	0		0	
    

    si 


CAPIa_R_T_C1	Rînd.CAEM col.1	dec/DataSet/Data/CAPIa/CAPIa_R[line]/CAPIa_R-T_C1	CAPIa		text	select2			0	0	0	0	0	0	0	14	0		<?php return declarations_get_caem_list('vocabulary_18'); ?>		table number dynamic-table-caem	0	0	10	0		0	

CAPII_R_T_C1	Cap.II Rînd.CAEM col.1	dec/DataSet/Data/CAPII/CAPII_R[line]/CAPII_R-T_C1	CAPII		text	select2			0	0	0	0	0	1	0	14	0		<?php return declarations_get_caem_list('vocabulary_18'); ?>		table number dynamic-table2-caem	0	0	10	0		0


adica CAPIa_R_T_C1 si CAPII_R_T_C1 sa se sincronizeze cu CAEM 


Nu functioneaza - iti trimit versiunea anterioara - 
in versiunea aceasta se sncronizeza dupa salvarea raportului, 
dar in versiunea aceasta se soncronizeza in timp real CAP  1 cu CAP 2 
Ai exemplu la CAP 1 si CAP 2  dupa acest exemplu fa si cazul nostru 

adica CAPIa_R_T_C1 si CAPII_R_T_C1 sa se sincronizeze cu CAEM 